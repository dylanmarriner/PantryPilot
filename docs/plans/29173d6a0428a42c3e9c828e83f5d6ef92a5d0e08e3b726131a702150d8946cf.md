<!--
ATLAS-GATE_PLAN_HASH: 29173d6a0428a42c3e9c828e83f5d6ef92a5d0e08e3b726131a702150d8946cf
COSIGN_SIGNATURE: MEQCIAKxRbhS6IvsoKDTFN2J+fH4T8Y9lQjAjXVGLNdki6znAiAN3P7QQGd08j6hzv8sPEoAiANmrViBwPG0XtIqm9YN3g==
ROLE: ANTIGRAVITY
STATUS: APPROVED
-->

# Plan Metadata

Plan ID: PLAN_PANTRYPILOT_PHASE_0_V1
Version: 1.0
Author: ANTIGRAVITY
Status: APPROVED
Timestamp: 2026-02-14T06:05:00Z
Governance: ATLAS-GATE-v1

# Scope & Constraints

Objective: Establish the PantryPilot project foundation including monorepo directory structure, Docker Compose baseline, and CI configuration as defined in Phase 0 of the roadmap.

Affected Files:
- [NEW] backend/package.json: Backend initialization
- [NEW] mobile/package.json: Mobile initialization
- [NEW] infra/docker-compose.yml: Infrastructure baseline
- [NEW] workers/package.json: Workers initialization
- [NEW] .github/workflows/ci.yml: CI pipeline configuration
- [MODIFY] README.md: Update project structure documentation

Out of Scope:
- Implementation of core inventory logic (Phase 1)
- VPS provisioning scripts (to be handled in infra/ later)
- Reverse proxy configuration (Caddy/Nginx)

Constraints:
- MUST follow the monorepo structure: backend/, mobile/, infra/, workers/, docs/, plans/
- MUST provide a working Docker Compose file for development
- MUST include a basic health endpoint check for the backend
- MUST NOT include any business logic or data models
- MUST be compatible with Ubuntu 24.04 environments

# Phase Definitions

## Phase: PHASE_0

Phase ID: PHASE_0
Objective: Create deterministic production-ready monolith scaffold
Allowed operations: CREATE, MODIFY
Forbidden operations: DELETE
Required intent artifacts: Directory structure, Docker Compose, CI config
Verification commands: docker-compose -f infra/docker-compose.yml config && ls -R backend mobile infra workers docs plans
Expected outcomes: All directories created, Docker config valid, project scaffold ready
Failure stop conditions: Verification failure, Hash mismatch, Path allowlist violation, Syntax error, Spectral lint failure

# Path Allowlist

- backend/
- mobile/
- infra/
- workers/
- docs/
- .github/
- README.md
- package.json

# Verification Gates

## Gate 1: Structure Integrity
Trigger: After directory creation
Check: ls -d backend mobile infra workers docs plans
Required: All core directories must exist
Failure: REJECT and ROLLBACK

## Gate 2: Infrastructure Validation
Trigger: After Docker config written
Check: docker-compose -f infra/docker-compose.yml config
Required: Valid compose file syntax
Failure: REJECT and ROLLBACK

## Gate 3: Governance Compliance
Trigger: Before approval
Check: Verify zero files outside allowlist were modified
Required: Zero violations
Failure: REJECT

# Forbidden Actions

Actions STRICTLY PROHIBITED:

- MUST NOT delete any existing documentation in docs/
- MUST NOT write business logic or database models
- MUST NOT execute arbitrary shell scripts unrelated to bootstrapping
- MUST NOT include unfinished markers or unfinished implementation logic
- MUST NOT skip any verification commands

# Rollback / Failure Policy

## Automatic Rollback Triggers
1. Verification gate fails
2. Path allowlist violation detected
3. Hash mismatch in plan execution

## Rollback Procedure
1. Execute: rm -rf backend/ mobile/ infra/ workers/
2. Execute: git checkout README.md
3. Verify clean state via git status
4. Log failure in audit-log.jsonl

## Recovery
1. Review diagnostic logs
2. Correct the foundation plan
3. Resubmit for linting and approval
